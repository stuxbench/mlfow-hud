#!/usr/bin/env python
"""Run a singular task using hud-python eval"""

import json
import subprocess
import sys

with open("tasks.json") as f:
    tasks = json.load(f)

# swap out for specific task to run here
full_info_task = tasks[0]

with open("single_task.json", "w") as f:
    json.dump([full_info_task], f, indent=2)

print(f"Running task: {full_info_task['id']}")
print(f"Info level: {full_info_task['info_level']}")
print(f"Prompt: {full_info_task['prompt']}\n")

cmd = [
    ".venv/bin/hud-python",
    "eval",
    "single_task.json",
    "claude",
    "--model",
    "claude-opus-4-20250514",
]

print(f"Executing: {' '.join(cmd)}\n")
result = subprocess.run(cmd)
sys.exit(result.returncode)